<h1>Register Page</h1>
<form style="padding: 40px">
  <div>
    <label for="email">Email:</label>
    <input name="email" type="text" id="email">
  </div>
  <div>
    <label for="password">Password:</label>
    <input name="password" type="text" id="password">
  </div>
  <div>
    <label for="first-name">First Name:</label>
    <input name="first-name" type="text" id="first_name">
  </div>
  <div>
    <label for="last-name">Last Name:</label>
    <input name="last-name" type="text" id="last_name">
  </div>
  <div>
    <label for="age">Age:</label>
    <input name="age" type="number" id="age">
  </div>
  <button type="submit">Register</button>
</form>

<script>
  const form = document.querySelector("form")
  form.addEventListener("submit", e => {
    e.preventDefault()
    const formData = {
      email: document.getElementById("email").value,
      password: document.getElementById("password").value,
      first_name: document.getElementById("first_name").value,
      last_name: document.getElementById("last_name").value,
      age: document.getElementById("age").value
    }
    formData.role = formData.email == "adminCoder@coder.com" ? "admin" : "user"
    fetch("/api/session/register", {method: "POST", body: JSON.stringify(formData), headers: {"Content-Type": "application/json"}})
      .then((json) => json.json())
      .then((res) => window.location.replace("/"+res.url))
  })
</script>